<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        .group {
            text-align: center;
            margin-bottom: 50px;
        }

        .numtext {
            height: 100px;
            font-size: 50px;
        }

        .container {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            max-width: 400px;
            margin: auto;
        }

        .sub {
            display: block;
            width: 100%;
            margin-bottom: 10px;
        }

        .btn-group {
            display: flex;
            flex-wrap: wrap;
        }

        .btn {
            width: 32%;
            color: white;
            background-color: black;
            margin: auto;
            border: 2px white solid;
            height: 50px;
        }
        .no {
            color: red;
        }
        .yes{
            color: green;
        }
    </style>
</head>

<body>

    <div class="group">
        <input type="text" class="numtext" value="1~100" readonly="readonly" />
    </div>
    <div class="container">
        <input type="button" onclick="rightNum()" class="sub" value="產生數字">
        <input type="text" class="sub gnumtext" value="請輸入1~100的整數" readonly="readonly" id="text" />
        <div class="btn-group">
            <input onclick="typeNum('1')" class="btn typenum" type="button" value="1">
            <input onclick="typeNum('2')" class="btn typenum" type="button" value="2">
            <input onclick="typeNum('3')" class="btn typenum" type="button" value="3">
            <input onclick="typeNum('4')" class="btn typenum" type="button" value="4">
            <input onclick="typeNum('5')" class="btn typenum" type="button" value="5">
            <input onclick="typeNum('6')" class="btn typenum" type="button" value="6">
            <input onclick="typeNum('7')" class="btn typenum" type="button" value="7">
            <input onclick="typeNum('8')" class="btn typenum" type="button" value="8">
            <input onclick="typeNum('9')" class="btn typenum" type="button" value="9">
            <input onclick="cancel()" class="btn no" type="button" value="X">
            <input onclick="typeNum('0')" class="btn typenum" type="button" value="0">
            <input onclick="check()" class="btn yes" type="button" value="V">
        </div>
    </div>

    <script>
        let rNum = ""
        let gNum = ""
        let Max, Min
        const numtext = document.querySelector('.numtext')
        const gnumtext = document.querySelector('.gnumtext')
        const btns = document.querySelectorAll('.btn')

        window.onload = function () {
            clear()
        }

        function rightNum() {
            rNum = Math.floor(Math.random() * 100)
            console.log(rNum)
            gNum = ""
            gnumtext.value = `請輸入${Min}到${Max}之間的整數`
            numtext.value = `${Min}~${Max}`
        }

        function typeNum(str) {

            if (gNum == "") {
                gNum = str
                console.log(gNum)
            }
            else {
                gNum += str
            }
            gnumtext.value = gNum

        }

        function check() {

            let gNumInt = parseInt(gNum)
            let rNumInt = parseInt(rNum)

            if (rNum == "") {
                alert("請產生數字!!")
                return
            }
            else if (gNum == "") {
                alert("請輸入數字!!")
                return
            }
            else if (gNumInt > Max || gNumInt < Min) {
                alert(`請輸入${Min}到${Max}之間的整數`)
                gNum = ""
                gnumtext.value = `請輸入${Min}到${Max}之間的整數`
                return
            } else {
                if (gNumInt > rNumInt) {
                    Max = gNumInt
                    cancel()
                    showInfo(Max, Min)
                }
                else if (gNumInt < rNumInt) {
                    Min = gNumInt
                    cancel()
                    showInfo(Max, Min)
                }
                else if (gNumInt == rNumInt) {
                    alert(`遊戲結束，答案是${rNum}`)
                    clear()
                    gnumtext.value = "請輸入1~100的整數"
                }
            }
        }

        function cancel() {
            gNum = ""
            // gnumtext.value = `請輸入${Min}到${Max}之間的整數`
            gnumtext.value = ""
        }

        function showInfo(Max, Min) {
            numtext.value = `${Min}~${Max}`
        }

        function clear() {
            Max = 100
            Min = 1
            gNum = ""
            rNum = ""
            gnumtext.value = `請輸入${Min}到${Max}之間的整數`
        }

    </script>
</body>

</html>